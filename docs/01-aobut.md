# はじめに

## プロジェクトの作成

フレッシュプロジェクトは、フレッシュ・プロジェクト作成ツールを使用。
新しいプロジェクトのためのサンプル・ファイルのベースを作る。

作成方法:

```sh
deo run -A -r https://fresh.deno.dev
cd freash-project
deno task start
```

いくつかのファイルとディレクトリが作成される。
Freshプロジェクトを実行するために厳密に必要なファイルが4つある。

- `dev.ts`: プロジェクトの開発エントリーポイント。開始するための実行するファイル。dev.tsである必要はないが慣例。
- `main.js`: プロジェクトの本番用のエントリーポイント。deno deployにリンクするファイル。main.jsである必要はないが、慣例。
- `fresh.gen.ts`: ルートとアイランドに関する情報を含むマネフィストファイル。このファイルは、`routes/`と`islands/`のフォルダに基づいて開発時に自動的に生成。

`deno.json`ファイルも作成される。
2つの役割

- importsフィールドを定義する。
  プロジェクトの依存関係を管理
  インポートや更新が簡単にできるようになる。

- 長いdeno runコマンドを入力することなく実行するためのstartタスクを登録する。

routesとislandsをそれぞれ格納する格納する重要なフォルダが作成される。

- routes/: このフォルダにはプロジェクトの全てのルートが含まれる。このフォルダ🈚️のファイルの名前は、そのページにアクセスするパスに対応している。
  このフォルダ内のコードが直接クライアントに送られることはない。

- islands: このフォルダにはプロジェクトないの全てのインタラクティブアイランドが含まれる。書くファイルの名前は、そのファイルで定義されているislandsの名前に対応している。
  このフォルダ内のコードは、クライアントとサーバーの両方から実行できる。

最後にstatic/フォルダが作成され、自動的にその後提供される静的ファイルが格納される。

## ローカルで実行

次は実際にプロジェクトを開始。

`deno task start`を実行すれば良い。
環境変数は自動的に.envから読み込まれる。

```sh
$ deno task start
Watcher Process started.
 🍋 Fresh ready
     Local: http://localhost:8000
```

手動実行は適切なフラグを指定して、main.tsを実行。
パーミッションフラグの指定が必要。

- `--allow-net`: httpサーバの起動に必要
- `--allow-read` ディスクからファイルを読み込むために必要
- `--allow-env`: プロジェクトの設定に使用する環境変数を読み込むために必要
- `--allow-run`: 開発中にdenoとesbuildにシェルアウトしてタイプストッピングを行うために必要。本番環境では、WebAssemblyバイナリを使用する。
